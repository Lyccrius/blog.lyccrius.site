---
layout: post
title: "AcWing 89. a^b"
categories: solution acwing
---

> 题目链接：[89. a^b -AcWing题库](https://www.acwing.com/problem/content/91/)  

如果 $b$ 在二进制表示下有 $k$ 位，其中第 $i(0\le i<k)$ 位的数字是 $c_i$ ，那么：
> $$b=c_{k-1}2^{k-1}+c_{k-2}2^{k-2}+…+c_{0}2^{0}$$

于是：
> $${a^b}=a^{c_{k-1}*2^{k-1}}*a^{c_{k-1}*2^{k-1}}*…*a^{c_0*2^0}$$

因为 $k=\lceil{log_2(b+1)}\rceil$ ，所以上式乘积项的数量不多于 $\lceil{log_2(b+1)}\rceil$ 个。  
又因为：
> $$a^{2^i}=(a^{2^{i-1}})^2$$

所以很容易通过 $k$ 次递推求出每个乘积项，当 $c_i=1$ 时，把该乘积项累积到答案中。  
* $b\&1$ 运算可以取出 $b$ 在二进制表示下的最低位
*  $b>>1$ 运算可以舍去最低位  
  
在递推的过程中将二者结合，就可以遍历 $b$ 在二进制表示下的所有数位 $c_i$ 。  

整个算法的时间复杂度位 $O(log_2b)$。

> 完整代码：[a^b.cpp](https://gitee.com/lyccrius/oi/tree/master/www.acwing.com/problem/content/91)