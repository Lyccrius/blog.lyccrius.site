---
layout: post
title:  第4章 函数和递归
date:   2023-02-11
categories: course sfjs rmjd
---

## [UVA512 Spreadsheet Tracking](https://www.luogu.com.cn/record/101868464)

记录每个格子存储的是原始数据中哪一位置的信息，根据输入模拟操作后统计答案。

注意边界问题。

还有就是同时对多个对象操作需要注意 `rank`。

```cpp
void init() {
    for (int i = 1; i <= r; i++) for (int j = 1; j <= c; j++) cx[i][j] = i;
    for (int i = 1; i <= r; i++) for (int j = 1; j <= c; j++) cy[i][j] = j;
    for (int i = 1; i <= r; i++) for (int j = 1; j <= c; j++) ax[i][j] = 0;
    for (int i = 1; i <= r; i++) for (int j = 1; j <= c; j++) ay[i][j] = 0;
    return;
}

void EX() {
    std::cin >> r1 >> c1 >> r2 >> c2;
    std::swap(cx[r1][c1], cx[r2][c2]);
    std::swap(cy[r1][c1], cy[r2][c2]);
    return;
}

void DC() {
    std::cin >> A;
    for (int i = 1; i <= A; i++) std::cin >> x[i];
    std::sort(x + 1, x + A + 1);
    for (int k = 1; k <= A; k++) {
        for (int i = 1; i <= r; i++) {
            for (int j = x[k] - k + 1; j <= c - 1; j++) {
                cx[i][j] = cx[i][j + 1];
                cy[i][j] = cy[i][j + 1];
            }
        }
        for (int i = 1; i <= r; i++) {
            cx[i][c] = 0;
            cy[i][c] = 0;
        }
        c--;
    }
    return;
}

void DR() {
    std::cin >> A;
    for (int i = 1; i <= A; i++) std::cin >> x[i];
    std::sort(x + 1, x + A + 1);
    for (int k = 1; k <= A; k++) {
        for (int i = x[k] - k + 1; i <= r - 1; i++) {
            for (int j = 1; j <= c; j++) {
                cx[i][j] = cx[i + 1][j];
                cy[i][j] = cy[i + 1][j];
            }
        }
        for (int j = 1; j <= c; j++) {
            cx[r][j] = 0;
            cy[r][j] = 0;
        }
        r--;
    }
    return;
}

void IC() {
    std::cin >> A;
    for (int i = 1; i <= A; i++) std::cin >> x[i];
    std::sort(x + 1, x + A + 1);
    for (int k = 1; k <= A; k++) {
        for (int i = 1; i <= r; i++) {
            for (int j = c + 1; j >= x[k] + k; j--) {
                cx[i][j] = cx[i][j - 1];
                cy[i][j] = cy[i][j - 1];
            }
        }
        for (int i = 1; i <= r; i++) {
            cx[i][x[k] + k - 1] = 0;
            cy[i][x[k] + k - 1] = 0;
        }
        c++;
    }
    return;
}

void IR() {
    std::cin >> A;
    for (int i = 1; i <= A; i++) std::cin >> x[i];
    std::sort(x + 1, x + A + 1);
    for (int k = 1; k <= A; k++) {
        for (int i = r + 1; i >= x[k] + k; i--) {
            for (int j = 1; j <= c; j++) {
                cx[i][j] = cx[i - 1][j];
                cy[i][j] = cy[i - 1][j];
            }
        }
        for (int j = 1; j <= c; j++) {
            cx[x[k] + k - 1][j] = 0;
            cy[x[k] + k - 1][j] = 0;
        }
        r++;
    }
    return;
}
```

```cpp
    for (int i = 1; i <= r; i++) {
        for (int j = 1; j <= c; j++) {
            ax[cx[i][j]][cy[i][j]] = i;
            ay[cx[i][j]][cy[i][j]] = j;
        }
    }
```

## [UVA815 Flooded!](https://www.luogu.com.cn/record/101871143)

模拟即可。

二分答案也行。

注意题面并未说明海拔的值域，故设为 $[-1e9, 1e9]$。

```cpp
bool check(double x) {
    double ret = 0;
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= m; j++) {
            if (a[i][j] < x) {
                ret += (x - a[i][j]) * 100;
            } 
        }
    }
    return ret >= t;
}

double solve(double x) {
    double ret = 0;
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= m; j++) {
            if (a[i][j] < x) {
                ret += 1;
            }
        }
    }
    return ret * 100 / n / m;
}
```