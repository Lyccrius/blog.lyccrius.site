---
layout: post
title: "AcWing 105. 七夕祭"
date:   2022-09-03
categories: solution acwing
---

> 题目链接：<a href="https://www.acwing.com/problem/content/107/" target="_blank">105. 七夕祭 - AcWing题库</a>

经过分析，我们可以发现，交换左右两个相邻的摊点只会改变某两列中 cl 感兴趣的摊点数，不会改变每行中 cl 感兴趣的摊点数。

同理，交换上下两个相邻的摊点只会改变某两行中 cl 感兴趣的摊点数，不会改变每列中 cl 感兴趣的摊点数。

所以我们可以把本题分成两个互相独立的部分计算。

1. 通过最少次数的左右互换使每列中 cl 感兴趣的摊点数相同。
2. 通过最少次数的上下交换使每行中 cl 感兴趣的摊点数相同。

以第 1 个问题为例进行探讨。

我们可以统计处在初始情况下，每列中 cl 感兴趣的摊点总数，记为 $$C[1] \sim ～ C[M]$$。

若 cl 感兴趣的摊点总数 $$T$$ 不能被 $$M$$ 整除，则不可能达到要求。

若 $$T$$ 能被 $$M$$ 整除，则我们的目标就是让每列中有 $$T/M$$ 个 cl 感兴趣的摊点。

思考到这里，读者可能已经想到了一个与此类型的经典问题 “均分纸牌”。“均分纸牌” 问题是说，有 $$M$$ 个人拍成一行，他们手中分别有 $$C[1] \sim C[M]$$ 张纸牌，在每一步操作中，可以让某个人把自己手中的一张纸牌交给他旁边的一个人，求至少需要多少步操作才能让每个人手里持有的纸牌数相等。

显然，当所有人手中持有的纸牌总数 $$T$$ 能被 $$M$$ 整除时，“均分纸牌” 问题有解，在有解时，我们可以先考虑第一个人。

1. 若 $$C[1] > T / M$$，则第一个人需要给第二个人 $$C[1] - T / M$$ 张纸牌，即把 $$C[2]$$ 加上 $$C[1] - T / M$$。
2. 若 $$C[1] < T / M$$，则第一个人需要从第二个人手中拿 $$T / M - C[1]$$ 张纸牌，即把 $$C[2]$$ 减去 $$T / M - C[1]$$。

按照同样的方法，依次考虑第 $$2 \sim M$$ 个人。

