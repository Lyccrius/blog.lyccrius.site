---
layout: post
title: "UOJ Round #1"
date:   2023-06-24
categories: solution uoj
---

## A. 缩进优化

### 20pts

>   $n \le 10^3$  
>   $a_i \le 2000$

枚举 $x$，答案为 $\sum_{i = 1}^n \lfloor \frac{a_i}{x} \rfloor + (a_i \bmod x)$。

$x$ 的上界为 $\max a_i$，时间复杂度 $\mathcal O(na)$。

### 40pts

>   $n \le 10^5$  
>   $a_i \le 2000$

$n$ 的规模远大于 $a_i$，同一个 $a_i$ 会出现多次。

$a_i$ 的顺序与答案无关，同一个 $a_i$ 对答案贡献相同。

于是可以统计 $a_i$ 的数量，对于同一个 $a_i$ 只考虑一次，避免重复枚举。

时间复杂度 $\mathcal O(n + a^2)$。

### 70pts

>   $n \le 10^5$  
>   $a_i \le 10^5$

换个角度思考问题。

从 $a_i$ 对答案的贡献转到 $x$ 对答案的贡献。

每次将长度为 $x$ 的 <kbd>空格</kbd> 替换为 <kbd>TAB</kbd>，总长度减少 $x - 1$。
</kbd>
记 $b_x = \sum_{i = 1}^n \lfloor \frac{a_i}{x} \rfloor$，即每行可替换次数，答案为 $\sum_{i = 1}^n a_i - b_x \times (x - 1)$。

这是一个整除分块的形式，对于一个 $a_i$，$\lfloor \frac{a_i}{x} \rfloor$ 最多有 $\sqrt a$ 种取值。

对于一个 $a_i$，枚举使得 $\lfloor \frac{a_i}{x} \rfloor$ 相同的 $x$ 的区间 $[l, r]$，将 $\lfloor \frac{a_i}{x} \rfloor$ 累加到 $b$ 数组上，使用前缀和与差分以做到 $\mathcal O(1)$。

最后枚举 $x$ 计算答案。

时间复杂度 $\mathcal O(n + a \sqrt a)$。

记得对 $b$ 数组开 `long long`。

### 100pts

>   $n \le 10^6$  
>   $a_i \le 10^6$

把问题想复杂了。

换个角度思考问题。

